
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Using everest applications &mdash; everest demo 1.0b2 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-2.3.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-2.3.0/css/bootstrap-responsive.min.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0b2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-2.3.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="everest demo 1.0b2 documentation" href="index.html" />
    <link rel="next" title="Glossary of Terms" href="glossary.html" />
    <link rel="prev" title="Building everest applications" href="building.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>
<div class="container">
  
  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a class="brand" href="index.html">everest demo</a>
      <span class="navbar-text pull-left"><b>1.0</b></span>

      <div class="nav-collapse">
        <ul class="nav">
          <li class="divider-vertical"></li>
          
            <li class="dropdown globaltoc-container">
  <a href="index.html"
     class="dropdown-toggle"
     data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
    ><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="building.html">Building <em>everest</em> applications</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Using <em>everest</em> applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary of Terms</a></li>
</ul>
</ul>
</li>
            <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">Using <em>everest</em> applications</a><ul>
<li><a class="reference internal" href="#querying-with-get">1. Querying with GET</a></li>
<li><a class="reference internal" href="#customizing-representations">2. Customizing representations</a><ul>
<li><a class="reference internal" href="#customizing-resource-attribute-representation">Customizing resource attribute representation</a></li>
<li><a class="reference internal" href="#using-different-mime-content-types">Using different MIME content types</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
          
          
            
  <li><a href="building.html"
         title="previous chapter">&laquo; Building <em>everest</em> applications</a></li>
  <li><a href="glossary.html"
         title="next chapter">Glossary of Terms &raquo;</a></li>
          
          
            <li>
  <a href="_sources/using.txt"
     rel="nofollow">Source</a></li>
          
        </ul>

        
          
<form class="navbar-search pull-right" style="margin-bottom:-3px;" action="search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        
      </div>
    </div>
  </div>

  
  <div class="section" id="using-everest-applications">
<h1>Using <em>everest</em> applications<a class="headerlink" href="#using-everest-applications" title="Permalink to this headline">¶</a></h1>
<div class="section" id="querying-with-get">
<h2>1. Querying with GET<a class="headerlink" href="#querying-with-get" title="Permalink to this headline">¶</a></h2>
<p>One of the main features of the collection resources in <tt class="xref py py-mod docutils literal"><span class="pre">everest</span></tt> are their
advanced filtering, ordering and batching capabilities. Query strings have to
conform to a custom query language, the Collection Query Language (<tt class="docutils literal"><span class="pre">CQL</span></tt>).</p>
<p>A <tt class="docutils literal"><span class="pre">CQL</span></tt> query consists of a filtering part, an ordering part, and a batching
part. All parts are optional; if they are omitted, the collection is returned
unfiltered using the default sort order and the default batch size defined by
the collection (if specified).</p>
<p>The filtering part of a <tt class="docutils literal"><span class="pre">CQL</span></tt> query (prefixed with the string <tt class="docutils literal"><span class="pre">q=</span></tt>) consists
of one or more criteria of the form</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">resource</span> <span class="pre">attribute</span> <span class="pre">name</span> <span class="pre">&quot;:&quot;</span> <span class="pre">operator</span> <span class="pre">&quot;:&quot;</span> <span class="pre">value</span></tt></div></blockquote>
<p>Example: <tt class="docutils literal"><span class="pre">last-name:equal-to:&quot;Doe&quot;</span></tt></p>
<p>It is possible to supply multiple criterion values in a comma separated list,
which will be interpreted as a Boolean &#8220;OR&#8221; operation on all given values.</p>
<p>Supported types for a <tt class="docutils literal"><span class="pre">CQL</span></tt> criterion value are:</p>
<dl class="docutils">
<dt>String</dt>
<dd>Arbitrary string enclosed in double quotes.</dd>
<dt>Number</dt>
<dd>Integer or floating point, scientific notation allowed.</dd>
<dt>Boolean</dt>
<dd>Case insensitive string <strong>true</strong> or <strong>false</strong>.</dd>
<dt>Date/Time</dt>
<dd><tt class="docutils literal"><span class="pre">ISO</span> <span class="pre">8601</span></tt> encoded string enclosed in double quotes.</dd>
<dt>Resource</dt>
<dd><tt class="docutils literal"><span class="pre">URL</span></tt> referencing a resource.</dd>
</dl>
<p>The ordering part of a <tt class="docutils literal"><span class="pre">CQL</span></tt> query (prefixed with the string <tt class="docutils literal"><span class="pre">sort=</span></tt>)
consists of one or more order criteria of the form</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">resource</span> <span class="pre">attribute</span> <span class="pre">name</span> <span class="pre">&quot;:&quot;</span> <span class="pre">operator</span></tt></div></blockquote>
<p>where the operator is one of <tt class="docutils literal"><span class="pre">asc</span></tt> (ascending sort order) or <tt class="docutils literal"><span class="pre">desc</span></tt>
(descending sort order).</p>
<p>Example: <tt class="docutils literal"><span class="pre">last-name:asc</span></tt></p>
<p>In filtering and ordering query expressions, you can specify a dotted identifier
as the resource attribute name to query nested resources. Also, multiple
<tt class="docutils literal"><span class="pre">CQL</span></tt> filter and order criteria can be combined using the two logical
operators <tt class="docutils literal"><span class="pre">AND</span></tt> and <tt class="docutils literal"><span class="pre">OR</span></tt>. <tt class="docutils literal"><span class="pre">AND</span></tt> expressions have precedence over <tt class="docutils literal"><span class="pre">OR</span></tt>
expressions. The precedence rules can be overridden using open and close
parentheses (&#8220;<tt class="docutils literal"><span class="pre">(</span></tt>&#8221; and &#8220;<tt class="docutils literal"><span class="pre">)</span></tt>&#8221;). Using the tilde (&#8220;<tt class="docutils literal"><span class="pre">~</span></tt>&#8221;) character as a
shorthand for the <tt class="docutils literal"><span class="pre">AND</span></tt> operator is also supported; note, however, that you
can not combine a criteria expression that uses the tilde character with one
that uses the standard <tt class="docutils literal"><span class="pre">AND</span></tt> and <tt class="docutils literal"><span class="pre">OR</span></tt> operators.</p>
<p>The batching part of a <tt class="docutils literal"><span class="pre">CQL</span></tt> query can be used to specify a batch size (with
an expression of the form <tt class="docutils literal"><span class="pre">&quot;size&quot;</span> <span class="pre">&quot;=&quot;</span> <span class="pre">batch</span> <span class="pre">size</span></tt> where <tt class="docutils literal"><span class="pre">batch</span> <span class="pre">size</span></tt> is an
integer) and a batch number (with an expression of the form
<tt class="docutils literal"><span class="pre">&quot;offset&quot;</span> <span class="pre">&quot;=&quot;</span> <span class="pre">batch</span> <span class="pre">offset</span></tt> where <tt class="docutils literal"><span class="pre">batch</span> <span class="pre">offset</span></tt> is an integer).</p>
<p>The following table shows the available operators and data types in <tt class="docutils literal"><span class="pre">CQL</span></tt>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="12%" />
<col width="9%" />
<col width="10%" />
<col width="15%" />
<col width="12%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Operator</th>
<th class="head" colspan="5">Data Type</th>
</tr>
<tr class="row-even"><th class="head">Name</th>
<th class="head">String</th>
<th class="head">Number</th>
<th class="head">Boolean</th>
<th class="head">Date/Time</th>
<th class="head">Resource</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">starts-with</span></tt></td>
<td>x</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">not-starts-with</span></tt></td>
<td>x</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ends-with</span></tt></td>
<td>x</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">not-ends-with</span></tt></td>
<td>x</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">contains</span></tt></td>
<td>x</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>x</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">not-contains</span></tt></td>
<td>x</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>x</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">contained</span></tt></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">not-contained</span></tt></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">equal-to</span></tt></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">not-equal-to</span></tt></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">less-than</span></tt></td>
<td>&nbsp;</td>
<td>x</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">less-than-or-equal-to</span></tt></td>
<td>&nbsp;</td>
<td>x</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">greater-than</span></tt></td>
<td>&nbsp;</td>
<td>x</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">greater-than-or-equal-to</span></tt></td>
<td>&nbsp;</td>
<td>x</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">in-range</span></tt></td>
<td>&nbsp;</td>
<td>x</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>For resources that use the rdb repository, all attributes that are used to
compose a query expression need to be mapped column properties in the <tt class="docutils literal"><span class="pre">ORM</span></tt>.
You can also use synonyms of mapped columns (<tt class="docutils literal"><span class="pre">sqlalchemy.orm.synonym</span></tt>);
composite column properties (<tt class="docutils literal"><span class="pre">sqlalchemy.orm.composite</span></tt>) are not supported.</p>
<p>It is by design that the power of <tt class="docutils literal"><span class="pre">CQL</span></tt> to express complex queries is far
behind that of <tt class="docutils literal"><span class="pre">SQL</span></tt>. <tt class="docutils literal"><span class="pre">CQL</span></tt> aims to provide a simple, uniform querying
language for all collection resources of an applciation regardless of the
persistency backend used.</p>
<div class="sidebar">
<p class="first sidebar-title">GET request processing</p>
<p>A GET request to a collection resource with a query string such as</p>
<p><a class="reference external" href="http://localhost:6543/customers?q=first-name:startswith:&quot;J&quot;?order=last-name:asc?size=100">http://localhost:6543/customers?q=first-name:startswith:&#8221;J&#8221;?order=last-name:asc?size=100</a></p>
<p>is processed by <tt class="xref py py-mod docutils literal"><span class="pre">everest</span></tt> as follows:</p>
<ol class="last arabic simple">
<li>The context and its associated view are identified just as in any vanilla
<tt class="xref py py-mod docutils literal"><span class="pre">Pyramid</span></tt> application. In the example, this would be the <tt class="docutils literal"><span class="pre">customers</span></tt>
collection resource at the root of the object tree (the &#8220;root collection&#8221;)
and the <tt class="xref py py-class docutils literal"><span class="pre">everest.views.getcollection.GetCollectionView</span></tt>;</li>
<li>The view parses the query string submitted by the client (in the example,
the <tt class="docutils literal"><span class="pre">q=first-name:startswith:&quot;J&quot;</span></tt> part of the <tt class="docutils literal"><span class="pre">URL</span></tt>) into a resource
filter specification and applies it to the context collection resource.
This triggers a translation of the resource filter specification into
an entity filter specification which is then applied to the underlying
aggregate. This separation of resource and entity level attributes does
only make it possible to expose entity attributes under a different name
at the level of the resource, but also to expose attributes from nested
entities (using &#8220;dotted&#8221; identifiers);</li>
<li>The view processes the order string (<tt class="docutils literal"><span class="pre">order=last-name:asc</span></tt>) in the same
fashion as the query string;</li>
<li>The view parses the batch size string (<tt class="docutils literal"><span class="pre">size=100</span></tt>) and applies this
setting to the context collection resource;</li>
<li>The view iterates over the context collection resource and wraps the
filtered, ordered, and batched member resources into a new result
collection resource;</li>
<li>Using a representer, the view creates a string representation of the
appropriate content type (either requested by the client
or statically defined for the resource) from the result collection;</li>
<li>The view fills the response body with the representation, sets up the
response headers and returns the response for further processing through
the WSGI stack.</li>
</ol>
</div>
</div>
<div class="section" id="customizing-representations">
<h2>2. Customizing representations<a class="headerlink" href="#customizing-representations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="customizing-resource-attribute-representation">
<h3>Customizing resource attribute representation<a class="headerlink" href="#customizing-resource-attribute-representation" title="Permalink to this headline">¶</a></h3>
<p>The default behavior of the <tt class="xref py py-mod docutils literal"><span class="pre">everest</span></tt> representers is to</p>
<blockquote>
<div><ul class="simple">
<li>Represent all terminal attribute values as the value obtained by
converting the attribute value object to a string;</li>
<li>Represent nested member resources as links (<a href="#id1"><span class="problematic" id="id2">``</span></a>URL``s); and</li>
<li>Ignore nested collection resources.</li>
</ul>
</div></blockquote>
<p>Nested collections are ignored by default because retrieving a collection can be
very expensive and even just generating a <tt class="docutils literal"><span class="pre">URL</span></tt> for a collection requires
iterating over all its members. The exception to this rule is when the nested
collection can be specified using a &#8220;backreference&#8221; from its members to the
parent resource, defined in the <tt class="docutils literal"><span class="pre">backref</span></tt> argument to the
<tt class="xref py py-func docutils literal"><span class="pre">collection_attribute()</span></tt> descriptor).</p>
<p>To change these defaults for a given resource attribute, we set the appropriate
<tt class="docutils literal"><span class="pre">representer</span></tt>, <tt class="docutils literal"><span class="pre">attribute</span></tt> and <tt class="docutils literal"><span class="pre">option</span></tt> tags inside a <tt class="docutils literal"><span class="pre">resource</span></tt>
declaration. For example, to include the nested <tt class="docutils literal"><span class="pre">projects</span></tt> collection in
<tt class="docutils literal"><span class="pre">CSV</span></tt> representations of <tt class="docutils literal"><span class="pre">customer</span></tt> members we would include the following
declaration in the <tt class="docutils literal"><span class="pre">ZCML</span></tt> configuration file:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;representer</span>
   <span class="na">kind=</span><span class="s">&quot;member&quot;</span>
   <span class="na">content_type=</span><span class="s">&quot;everest.mime.CsvMime&quot;</span>
<span class="nt">&gt;</span>
   <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;projects&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;option</span>
           <span class="na">name=</span><span class="s">&quot;ignore&quot;</span>
           <span class="na">value=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
       <span class="nt">&lt;option</span>
           <span class="na">name=</span><span class="s">&quot;write_as_link&quot;</span>
           <span class="na">value=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/attribute&gt;</span>
<span class="nt">&lt;/representer&gt;</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">ignore</span></tt> option is a shorthand for setting both the <tt class="docutils literal"><span class="pre">ignore_on_read</span></tt> and
the <tt class="docutils literal"><span class="pre">ignore_on_write</span></tt> option which set the ignore behavior selectively when a
representation is parsed (<tt class="docutils literal"><span class="pre">ignore_on_read</span></tt>) or generated
(<tt class="docutils literal"><span class="pre">ignore_on_write</span></tt>). The <tt class="docutils literal"><span class="pre">write_as_link</span></tt> option specifies whether the
resource attribute is represented as a (<tt class="docutils literal"><span class="pre">URL</span></tt>) link (option value set to
&#8220;<cite>true</cite>&#8221;) or in its &#8220;expanded&#8221; form with all its (nested) resource attributes
represented (option value set to &#8220;<cite>false</cite>&#8221;. If you choose to expand a resource
attribute, by default only its terminal nested attributes will be included in
the representation. To include nested member and collection attributes (either
as a link or, recursively, expanded) you need to provide another <cite>attribute</cite>
tag using a dotted attribute name. For example, adding the following tag inside
the <cite>representer</cite> tag above will cause the <cite>sites</cite> attribute of the customer&#8217;s
<cite>projects</cite> attribute to be included as a link:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;projects.sites&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;option</span>
        <span class="na">name=</span><span class="s">&quot;ignore&quot;</span>
        <span class="na">value=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/attribute&gt;</span>
</pre></div>
</div>
<p>There is no limit to the nesting depth of such dotted attribute configuration
tags.</p>
<p>It is perhaps most instructive to think of these attribute configurations as a
way to prune the branches of a resource data tree when building a
representation of the latter.</p>
<p>In addition to pruning the branches of the resource data tree, you can also
rename them with the <tt class="docutils literal"><span class="pre">repr_name</span></tt> tag, again with the option to use dotted
attribute names to reference nested branches:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;projects.name&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;option</span>
        <span class="na">name=</span><span class="s">&quot;repr_name&quot;</span>
        <span class="na">value=</span><span class="s">&quot;project_name&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/attribute&gt;</span>
</pre></div>
</div>
<p>This feature is very useful for assigning meaningful field names to nested
attributes in <tt class="docutils literal"><span class="pre">CSV</span></tt> representations (by default, the <tt class="docutils literal"><span class="pre">CSV</span></tt> representer will
use the full dotted attribute name as field name, i.e., <tt class="docutils literal"><span class="pre">projects.name</span></tt> in
the example above).</p>
</div>
<div class="section" id="using-different-mime-content-types">
<span id="id3"></span><h3>Using different MIME content types<a class="headerlink" href="#using-different-mime-content-types" title="Permalink to this headline">¶</a></h3>
<p>Unless specified otherwise, <tt class="xref py py-mod docutils literal"><span class="pre">everest</span></tt> assumes a default <tt class="docutils literal"><span class="pre">MIME</span></tt> content
type of <tt class="docutils literal"><span class="pre">application/csv</span></tt> for reading and writing resource representations.
The <tt class="docutils literal"><span class="pre">CSV</span></tt> <tt class="docutils literal"><span class="pre">MIME</span></tt> type, however, is rather limited with respect to
representing hierarchical data structures; it only supports at most one
collection attribute to be represented in expanded form.</p>
<p><tt class="xref py py-mod docutils literal"><span class="pre">everest</span></tt> also offers <tt class="docutils literal"><span class="pre">JSON</span></tt> (<tt class="docutils literal"><span class="pre">MIME</span></tt> type <tt class="docutils literal"><span class="pre">application/json</span></tt>) and
<tt class="docutils literal"><span class="pre">XML</span></tt> (<tt class="docutils literal"><span class="pre">MIME</span></tt> type <tt class="docutils literal"><span class="pre">application/xml</span></tt>) representers as alternatives to
<tt class="docutils literal"><span class="pre">CSV</span></tt>.</p>
<p>The <tt class="docutils literal"><span class="pre">JSON</span></tt> representer supports <tt class="docutils literal"><span class="pre">JSON-RPC</span></tt> style class hinting by setting
the <tt class="docutils literal"><span class="pre">__jsonclass__</span></tt> attribute to the value specified in the <tt class="docutils literal"><span class="pre">relation</span></tt>
attribute of the member class when a representation is created. Likewise, when
an incoming representation is parsed, the value of the <tt class="docutils literal"><span class="pre">__jsonclass__</span></tt>
attribute is used to look up the class to use for constructing resource member
objects.</p>
<p>The <tt class="docutils literal"><span class="pre">XML</span></tt> representer is a little more complex in that it requires declaration
of a schema, a namespace, and a namespace prefix:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;representer</span> <span class="na">content_type=</span><span class="s">&quot;everest.mime.XmlMime&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;option</span>
        <span class="na">name=</span><span class="s">&quot;xml_schema&quot;</span>
        <span class="na">value=</span><span class="s">&quot;plantscribe:schemata/Plantscribe.xsd&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;option</span>
        <span class="na">name=</span><span class="s">&quot;xml_ns&quot;</span>
        <span class="na">value=</span><span class="s">&quot;http://schemata.everest.org/plantscribe&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;option</span>
        <span class="na">name=</span><span class="s">&quot;xml_prefix&quot;</span>
        <span class="na">value=</span><span class="s">&quot;ps&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/representer&gt;</span>
</pre></div>
</div>
<p>It is also possible to specify the <tt class="docutils literal"><span class="pre">XML</span></tt> schema, namespace, and prefix
settings on a per-resource basis.</p>
<p>The <tt class="docutils literal"><span class="pre">XML</span></tt> schema needs to be based on the schema template provided in the file
<tt class="file docutils literal"><span class="pre">support.XmlSchemaTemplate.xsd</span></tt>. For each resource interface, the schema
defines <tt class="docutils literal"><span class="pre">XML</span></tt> types for a member resource, a collection resource, a link to a
member resource, and a link to a collection resource. Only the type specifying
the member resource needs to be customized, as demonstrated in the following
example for the <tt class="docutils literal"><span class="pre">ICustomer</span></tt> resource <a class="footnote-reference" href="#f3" id="id4">[1]</a> :</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;schema</span>
    <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span>
    <span class="na">targetNamespace=</span><span class="s">&quot;http://schemata.everest.org/plantscribe&quot;</span>
    <span class="na">elementFormDefault=</span><span class="s">&quot;qualified&quot;</span>
    <span class="na">xmlns:rc=</span><span class="s">&quot;http://schemata.everest.org/resource&quot;</span>
    <span class="na">xmlns:app=</span><span class="s">&quot;http://schemata.everest.org/plantscribe&quot;</span>
<span class="nt">&gt;</span>
    <span class="nt">&lt;import</span>
        <span class="na">schemaLocation=</span><span class="s">&quot;Resource.xsd&quot;</span>
        <span class="na">namespace=</span><span class="s">&quot;http://schemata.everest.org/resource&quot;</span>
    <span class="nt">&gt;</span>
    <span class="nt">&lt;/import&gt;</span>

    <span class="c">&lt;!-- CUSTOMER resource --&gt;</span>

    <span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;CustomerType&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;complexContent&gt;</span>
            <span class="nt">&lt;extension</span> <span class="na">base=</span><span class="s">&quot;rc:ResourceType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;choice&gt;</span>
                    <span class="nt">&lt;element</span>
                        <span class="na">name=</span><span class="s">&quot;link&quot;</span>
                        <span class="na">type=</span><span class="s">&quot;app:CustomerLinkType&quot;</span>
                    <span class="nt">&gt;</span>
                    <span class="nt">&lt;/element&gt;</span>
                    <span class="nt">&lt;sequence&gt;</span>
                        <span class="nt">&lt;element</span>
                            <span class="na">name=</span><span class="s">&quot;first_name&quot;</span>
                            <span class="na">type=</span><span class="s">&quot;string&quot;</span>
                        <span class="nt">&gt;</span>
                        <span class="nt">&lt;/element&gt;</span>
                        <span class="nt">&lt;element</span>
                            <span class="na">name=</span><span class="s">&quot;last_name&quot;</span>
                            <span class="na">type=</span><span class="s">&quot;string&quot;</span>
                        <span class="nt">&gt;</span>
                        <span class="nt">&lt;/element&gt;</span>
                        <span class="nt">&lt;element</span> <span class="na">ref=</span><span class="s">&quot;app:projects&quot;</span>
                            <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span>
                            <span class="na">maxOccurs=</span><span class="s">&quot;1&quot;</span>
                        <span class="nt">&gt;</span>
                        <span class="nt">&lt;/element&gt;</span>
                    <span class="nt">&lt;/sequence&gt;</span>
                <span class="nt">&lt;/choice&gt;</span>
            <span class="nt">&lt;/extension&gt;</span>
        <span class="nt">&lt;/complexContent&gt;</span>
    <span class="nt">&lt;/complexType&gt;</span>

<span class="nt">&lt;/schema&gt;</span>
</pre></div>
</td></tr></table></div>
<p>Since the <tt class="docutils literal"><span class="pre">XML</span></tt> schema can be validated both on the server and on the client
side, it can serve as a contract between the two sides; however, this
additional overhead is not always needed.</p>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="f3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[1]</a></td><td>The <tt class="docutils literal"><span class="pre">XML</span></tt> schema file should really be generated automatically from
the resource attribute declarations.</td></tr>
</tbody>
</table>
</div>
</div>
</div>


</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright Copyright (c) 2011-2013 F. Oliver Gathmann, Cenix BioScience, Dresden, Germany.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>